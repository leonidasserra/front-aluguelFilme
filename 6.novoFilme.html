<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <title>Adicionar Novo Filme</title>
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar">
      <ul>
          <a href="3.telaInicial.html">Home</a>
          <br>
          <a href="5.pessoas.html">Ver Clientes</a>
          <br>
          <a href="2.cadastro.html">Novo Cliente</a>
          <br>
          <a href="6.novoFilme.html">Novo Filme</a>
          <br>
          <a href="javascript:history.back()">Voltar</a>
          <br>
          <a href="1.login.html" id="exit-btn">Sair</a>
      </ul>
  </div>

  <!-- Conteúdo -->
  
   <div class="novo-filme-title">
    <h1> Filme Novo</h1>
   </div>
    <div class="main-content-signup"> <!-- wrapper para herdar estilos do arquivo anterior -->
       <!-- <h1 class="page-title"> Filme Novo</h1> -->

      <!-- Formulário -->
      <div class="inner-content-signup-movie"> <!-- mantém padrão do arquivo anterior -->
        <form action="/filmes" method="post" class="filme-form" novalidate>
          <!-- bloco 1: infos básicas -->
          <!-- <fieldset class="card-form">
            <legend>Informações básicas</legend> -->

          <div class="form-grid">
            <div class="section-signup">
              <label for="titulo">Título *</label>
              <input type="text" id="titulo" name="titulo" required placeholder="Ex.: O Senhor dos Anéis: A Sociedade do Anel" />
            </div>

            <div class="section-signup">
              <label for="genero">Gênero *</label>
              <select id="genero" name="genero" required>
                <option value="" selected disabled>Selecione...</option>
                <option>Ação</option>
                <option>Aventura</option>
                <option>Comédia</option>
                <option>Drama</option>
                <option>Fantasia</option>
                <option>Ficção Científica</option>
                <option>Romance</option>
                <option>Terror</option>
                <option>Suspense</option>
                <option>Animação</option>
              </select>
            </div>

            <div class="section-signup">
              <label for="ano">Ano *</label>
              <input type="number" id="ano" name="ano" required min="1888" max="2099" placeholder="2001" />
            </div>

            <div class="section-signup">
              <label for="duracaoMin">Duração (min)</label>
              <input type="number" id="duracaoMin" name="duracaoMin" min="1" max="999" placeholder="178" />
            </div>

            <div class="section-signup">
              <label for="classificacao">Classificação indicativa</label>
              <input type="text" id="classificacao" name="classificacao" placeholder="Livre, 10, 12, 14, 16, 18" />
            </div>

            <div class="section-signup">
              <label for="diretor">Diretor</label>
              <input type="text" id="diretor" name="diretor" placeholder="Ex.: Peter Jackson" />
            </div>

            <div class="section-signup">
              <label for="descricao">Descrição / Sinopse</label>
              <br>
              <textarea id="descricao" name="descricao" rows="5" placeholder="Breve sinopse do filme..."></textarea>
            </div>
          </div>
          <!-- </fieldset>  (mantido comentado no original) -->

          <!-- bloco 2: estoque e valores -->
          <div class="form-grid">
            <div class="section-signup">
              <label for="quantidadeEstoque">Quantidade em estoque *</label>
              <input type="number" id="quantidadeEstoque" name="quantidadeEstoque" required min="0" step="1" placeholder="12" />
            </div>
          </div>

          <br>

          <!-- ações -->
          <div class="form-actions">
            <button type="button" class="add-btn" id="saveMovieBtn">Salvar</button>
            <!-- <a href="listar-filmes.html" class="back-btn" role="button">Cancelar</a> -->
          </div>
        </form>
      </div> <!-- /inner-content-signup -->
    </div> <!-- /main-content-signup -->


</body>
<script>
  //Get dos inputs
const saveBtn=document.getElementById("saveMovieBtn");
saveBtn.addEventListener('click',()=>{
 let titulo = document.getElementById("titulo").value.trim(); 
 let genero = document.getElementById("genero").value; 
 let ano = document.getElementById("ano").value; 
 let duracao = document.getElementById("duracaoMin").value; 
 let classificacao = document.getElementById("classificacao").value; 
 let diretor = document.getElementById("diretor").value.trim(); 
 let descricao = document.getElementById("descricao").value.trim(); 
 let estoque = document.getElementById("quantidadeEstoque").value; 



 console.log(genero);
 console.log(ano);
 console.log(duracao);
requisicao={
  title: titulo,
  ano: ano,
  diretor: diretor,
  quantidadeEstoque: estoque,
  classificacao: classificacao,
  sinopse: descricao,
  duracao: duracao,
  genero: genero
}

requisicaoJson=JSON.stringify(requisicao,null,2);
console.log(requisicaoJson);
 fetch('http://localhost:8080/filme/criar',{
  method:'POST',
  headers:{
  'Content-Type':  "application/json"
  },
  body: requisicaoJson
 })
 .then(response =>{
if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
 })
 .then(data=>{
  console.log("sucesso:" + data);
})

 });

 
</script>
</html>
